# Планирование автоматизации тестирования

## Перечень автоматизированных сценариев:

**Валидные тестовые данные:**
1. Номер карты APPROVED - 1111 2222 3333 4444
   Номер карты DECLINED - 5555 6666 7777 8888
1. Месяц получен путем определения текущей даты (LocalDate.now()) и прибавлением к ней месяца, сгенерированного Faker от 1 до 12, и определения формата данных "MM"
1. Год получен путем определения текущей даты (LocalDate.now()) и прибавлением к ней года, сгенерированного Faker от 1 до 5, и определения формата данных "YY"
1. Владелец получен с помощью faker.name().fullName()
1. СVC/CVV код получег  с помощью faker.numerify("###")

**Обычная оплата по дебетовой карте (нажимаем в форме оплаты на кнопку купить):**

*1. Успешный сценарий покупки тура при оплате по карте со статусом одобрено с проверкой записи в БД*
1. Заполняем форму валидными тестовыми данными, используя карту APPROVED. Нажимаем продолжить.
1. Ожидаем сообщение "Успешно. Операция одобрена банком."
1. Делаем 2 запроса в базу данных (SELECT payment_id FROM order_entity oe, SELECT * FROM payment_entity pe). Получаем в первом случае скалярное значение, во втором строку. 
Сравниваем oe.payment_id и pe.id, сравниваем: pe.amount=45000 и status=APPROVED. 

*2. Успешный сценарий покупки тура при оплате по карте со статусом отклонено с проверкой записи в БД*
1. Заполняем форму валидными тестовыми данными, используя карту DECLINED. Нажимаем продолжить.
1. Ожидаем сообщение "Ошибка! Банк отказал в проведении операции."
1. Делаем 2 запроса в базу данных (SELECT payment_id FROM order_entity oe, SELECT * FROM payment_entity pe). Получаем в первом случае скалярное значение, во втором строку. 
Сравниваем oe.payment_id и pe.id, сравниваем: pe.amount=45000 и status=DECLINED.

*3. Покупка тура по карте с прошлым месяцем*
1. Заполняем в форме поля номер карты, владелец, год, CVC/CVV валидными тестовыми данными. Поле месяц заполняем месяцем, определенным с помощью LocalDate.now() минус 1 месяц в формате данных "MM"
Нажимаем продолжить
1. Ожидаем сообщения под полем месяц "Неверно указан срок действия карты"

*4. Покупка тура по карте с прошлым годом*
1. Заполняем в форме поля номер карты, владелец, месяц, CVC/CVV валидными тестовыми данными. Поле год заполняем годом, определенным с помощью LocalDate.now()  минус 1 год в формата данных "YY"
Нажимаем продолжить
1. Ожидаем сообщения под полем год "Истёк срок действия карты"

*5. Покупка тура по карте со сроком действия более 5 лет*
1. Заполняем в форме поля номер карты, владелец, месяц, CVC/CVV валидными тестовыми данными. Поле год заполняем годом, определенным с помощью LocalDate.now() плюс значение определенное faker от 5 лет в формата данных "YY"
Нажимаем продолжить
1. Ожидаем сообщения под полем год "Неверно указан срок действия карты"

*6. Покупка тура по карте с текущим месяцем и годом с проверкой записи в бд*
1. Заполняем в форме поле номер карты валидной картой APPROVED, поле владелец, CVC/CVV валидными тестовыми данными. Поле месяц заполняем месяцем, определенным с помощью LocalDate.now() в формате данных "MM", 
поле год заполняем годом, определенным с помощью LocalDate.now() в формате данных "YY". Нажимаем продолжить
1. Ожидаем сообщение "Успешно. Операция одобрена банком"
1. Делаем 2 запроса в базу данных (SELECT payment_id FROM order_entity oe, SELECT * FROM payment_entity pe). Получаем в первом случае скалярное значение, во втором строку. 
Сравниваем oe.payment_id и pe.id, сравниваем: pe.amount=45000 и status=APPROVED. 

*7. Покупка тура по карте с введением в поле месяц одной цифры*
1. Заполняем в форме поля номер карты, владелец, год, CVC/CVV валидными тестовыми данными. Поле месяц заполняем одной цифрой, определенной faker.
Нажимаем продолжить
1. Ожидаем сообщения под полем месяц "Неверный формат"

*8. Покупка тура по карте с введением в поле месяц несуществующего месяца*
1. Заполняем в форме поля номер карты, владелец, год, CVC/CVV валидными тестовыми данными. Поле месяц заполняем цийрой, определенным с помощью faker от 13 до 99
Нажимаем продолжить 
1. Ожидаем сообщения под полем месяц "Неверно указан срок действия карты"

*9. Покупка тура по карте с введением в поле год значения из одной цифры*
1. Заполняем в форме поля номер карты, владелец, месяц, CVC/CVV валидными тестовыми данными. Поле год заполняем одной цифрой, определенной faker.
Нажимаем продолжить
1. Ожидаем сообщения под полем год "Неверный формат"

*10. Покупка тура по карте с невалидным владельцем с использованием кириллицы*
1. Заполняем в форме поля номер карты, месяц, год, CVC/CVV валидными тестовыми данными. Поле владелец заполняем именем на кириллице, сгенерированным faker. 
Нажимаем продолжить.
1. Ожидаем сообщения под полем владелец "Неверный формат"


*11. Покупка тура по карте с невалидным владельцем с использованием цифр*
1. Заполняем в форме поля номер карты, месяц, год, CVC/CVV валидными тестовыми данными. Поле владелец заполняем именем на латинице, сгенерированным faker, плюс цифры 123. 
Нажимаем продолжить.
1. Ожидаем сообщения под полем владелец "Неверный формат"

*12. Покупка тура по карте с невалидным владельцем с использованием символов*
1. Заполняем в форме поля номер карты, месяц, год, CVC/CVV валидными тестовыми данными. Поле владелец заполняем именем на латинице, сгенерированным faker, плюс %?. 
Нажимаем продолжить.
1. Ожидаем сообщения под полем владелец "Неверный формат"

*13. Покупка тура по карте с внесением в поле владелец одной буквы на латинице*
1. Заполняем в форме поля номер карты, месяц, год, CVC/CVV валидными тестовыми данными. Поле владелец заполняем именем буквой j. Нажимаем продолжить.
1. Ожидаем сообщения под полем владелец "Неверный формат"

*14. Покупка тура по карте с cvc-кодом из 2 цифр*
1. Заполняем в форме поля номер карты, месяц, год, владелец валидными тестовыми данными. Поле CVC/CVV заполняем 2 цифрами, опредленными faker. Нажимаем продолжить.
1. Ожидаем сообщения под полем владелец "Неверный формат"

*15. Покупка тура по карте с незаполненным полем номер карты*
1. Заполняем в форме поля месяц, год, владелец, CVC/CVV валидными тестовыми данными. Поле номер карты оставляем пустым. Нажимаем продолжить.
1. Ожидаем сообщения под полем владелец "Поле обязательно для заполнения"

*16. Покупка тура по карте с незаполненным полем месяц*
1. Заполняем в форме поля номер карты, год, владелец, CVC/CVV валидными тестовыми данными. Поле месяц оставляем пустым. Нажимаем продолжить.
1. Ожидаем сообщения под полем владелец "Поле обязательно для заполнения"

*17. Покупка тура по карте с незаполенным полем год*
1. Заполняем в форме поля номер карты, месяц, владелец, CVC/CVV валидными тестовыми данными. Поле год оставляем пустым. Нажимаем продолжить.
1. Ожидаем сообщения под полем владелец "Поле обязательно для заполнения"

*18. Покупка тура по карте с незаполенным полем владелец*
1. Заполняем в форме поля номер карты, месяц, год, CVC/CVV валидными тестовыми данными. Поле владелец оставляем пустым. Нажимаем продолжить.
1. Ожидаем сообщения под полем владелец "Поле обязательно для заполнения"

*19. Покупка тура по карте с незаполненным полем cvc-код*
1. Заполняем в форме поля номер карты, месяц, год, владелец валидными тестовыми данными. Поле CVC/CVV оставляем пустым. Нажимаем продолжить.
1. Ожидаем сообщения под полем владелец "Поле обязательно для заполнения"

*20. Покупка тура по карте с номером, состоящим из менее 16 цифр*
1. Заполняем в форме поля месяц, год, владелец, CVC/CVV валидными тестовыми данными. Поле номер карты заполняем с помощью faker от 1 до 15. Нажимаем продолжить.
1. Ожидаем сообщения под полем владелец "Неверный формат"

**Тестирование API обычная оплата по дебетовой карте:**
*21. Тестирование API(post) покупки тура по карте со статусом APPROVED*
1. Вводим валидные тестовые данные, номер карты со статусом APPROVED
1. Отправляем запрос на post http://localhost:8080/api/v1/pay
1. Ожидаем получить "status": "APPROVED", statusCode 200

*22. Тестирование API(post) покупки тура по карте со статусом DECLINED*
1. Вводим валидные тестовые данные кроме номер карты со статусом APPROVED
1. Отправляем запрос на post http://localhost:8080/api/v1/pay
1. Ожидаем получить "status": "DECLINED", statusCode 200

*23. Тестирование API(post) покупки тура при заполнение поля владелец на кириллице*
1. Вводим в номер карты, месяц, год, CVC/CVV валидные тестовые данные. Владелец заполняем данными на кириллице, сгенерированными faker
1. Отправляем запрос на post http://localhost:8080/api/v1/pay
1. Ожидаем получить statucCode 500

*24. Тестирование API(post) покупки тура при заполении номером карты, состоящим из менее 16 цифр*
1. Вводим в месяц, год, владелец, CVC/CVV валидные тестовые данные. Номер карты заполняем с помощью faker от 1 до 15
1. Отправляем запрос на post http://localhost:8080/api/v1/pay
1. Ожидаем получить statucCode 500   

*25. Тестирование API(post) покупки тура при заполении формы прошлым месяцем*
1. Вводим в номер карты, год, владелец, CVC/CVV валидные тестовые данные. Месяц заполняем месяцем, определенным с помощью LocalDate.now() минус 1 месяц в формате данных "MM"
1. Отправляем запрос на post http://localhost:8080/api/v1/pay
1. Ожидаем получить statucCode 500

*26. Тестирование API(post) покупки тура при заполении формы прошлым годом*
1. Вводим в номер карты, месяц, владелец, CVC/CVV валидные тестовые данные. Год заполняем годом, определенным с помощью LocalDate.now()  минус 1 год в формата данных "YY"
1. Отправляем запрос на post http://localhost:8080/api/v1/pay
1. Ожидаем получить statucCode 500

*27. Тестирование API(post) покупки тура при заполении cvc-кода из 2 цифр*
1. Вводим в номер карты, месяц, год, владелец, валидные тестовые данные. CVC/CVV заполняем 2 цифрами, опредленными faker.
1. Отправляем запрос на post http://localhost:8080/api/v1/pay
1. Ожидаем получить statucCode 500

## Перечень используемых инструментов:
1. Система хранения версий git и удаленное хранилище репозиториев GitHub
1. Скрипт docker-compose.yml для автоматизированного создания контейнера с базой данных MySql
1. application.properties для подключения приложения к базе данных и внешним сервисам
1. Проведение тестирования на языке программирования Java (JDK11) с использованием системы автоматизированной сборки Gradle
1. Фреймворк allure для построения отчетности
1. фреймворк Rest Assured для тестирования API
1. Генератор тестовых данных faker для получения тестовых данных 
1. Инструмент lombok для генерации кода с помощью аннтотаций
1. Фреймворк Selenide для автоматизированного тестирования  
1. Фреймворк JUnit5 для проведения тестов
1. Драйвер MySQL для контроля за состоянием базы данных
1. Библиотека DBUtils для контроля за состоянием базы данных и упрощения написания кода
1. Паттерн DataGenerator для инкапсулирования тестовых данных
1. Паттерн PagePbject

## Риски автоматизации:
1. Ошибки проведения тест-дизайна
1. Ошибки написания автоматизированных тестов
1. Неполадки тестового окружения
1. Сбои в подключении к внешним сервисам
1. Не уложиться в сроки автоматизации 
1. Сложность в поддержке тестов
1. Медленные тесты

## Интервальная оценка с учетом рисков:
45 часов

## План сдачи работ: (когда будут автотесты, результаты их прогона и отчёт по автоматизации):
1. Ручное тестирование 17.09.2022
1. Автоматизированное тестирование 22.09.2022
1. Прогон автотестов 24.09.2022
1. Отчет по автоматизации 25.09.2022



 
